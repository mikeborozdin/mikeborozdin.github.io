<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Mike Borozdin&#39;s Blog</title>
    <description>software engineering, product management &amp; agile
</description>
    <link>https://mikeborozdin.com/</link>
    <atom:link href="https://mikeborozdin.com/feed.xml" rel="self" type="application/rss+xml"/>
    <pubDate>Sat, 20 Feb 2021 12:49:20 +0000</pubDate>
    <lastBuildDate>Sat, 20 Feb 2021 12:49:20 +0000</lastBuildDate>
    <generator>Jekyll v2.5.3</generator>
    
      <item>
        <title>On being effective tech lead</title>
        <description>&lt;p&gt;Tech Lead / Lead Developer / (Whatever it is called in your company) is a very interesting role that combines technical
work and leadership.&lt;/p&gt;

&lt;p&gt;I’ve been in that role at a few different companies and I’d like to share my thoughts on what you can do to be effective in that role.&lt;/p&gt;

&lt;p&gt;Equally, this article may also help you to decide if you want to try the role.
&lt;!-- more --&gt;&lt;/p&gt;

&lt;h1 id=&quot;your-main-goal-is-to-enable-your-team&quot;&gt;Your main goal is to enable your team&lt;/h1&gt;

&lt;p&gt;Your first and foremost goal as a tech lead is to enable your team. Your team’s success is your success. &lt;/p&gt;

&lt;p&gt;Yes, it was partly your technical chops that brought you into this role, but a tech lead is not the person who writes the best
code on the team (at least not just). &lt;/p&gt;

&lt;p&gt;But it is the person who enables the entire team. And that means doing whatever it takes to help your team to 
succeed - whether it’s mentoring them technically or buying coffee - you have to do it.&lt;/p&gt;

&lt;p&gt;Generally though you work on two fronts - product and technical.&lt;/p&gt;

&lt;h2 id=&quot;product&quot;&gt;Product&lt;/h2&gt;

&lt;p&gt;Yes, it is a role of a product manager to define a product vision, build a roadmap, and write user stories. But if user stories are missing details or the team does not know what they’ll be coding next week, it is your responsibility to step and help the team.
Sometimes it means you’ll fill the gaps yourself and tell the team about what you’ve heard in that long product meeting last Thursday.&lt;/p&gt;

&lt;p&gt;Or sometimes you have to guide the product team on how to better translate their ideas into something developers can work with. &lt;/p&gt;

&lt;p&gt;Shortly, you need to make sure that your team knows not only &lt;strong&gt;how&lt;/strong&gt; to build software, but &lt;strong&gt;what&lt;/strong&gt; to build.&lt;/p&gt;

&lt;h2 id=&quot;technical&quot;&gt;Technical&lt;/h2&gt;

&lt;p&gt;And speaking of the question of how to build, this is where your technical expertise comes in. &lt;/p&gt;

&lt;p&gt;You need to make sure that your team knows how to build those fancy features and fix pesky bugs.&lt;/p&gt;

&lt;p&gt;So if someone has not worked on a certain part of the codebase, sit with them and walk them through it.&lt;/p&gt;

&lt;p&gt;If someone does not know which environment to deploy and where the API keys are, help them with that. &lt;/p&gt;

&lt;p&gt;If someone is stuck, drop whatever you’re doing and unblock them. &lt;/p&gt;

&lt;h2 id=&quot;but-delegate-and-help-your-teammates-grow&quot;&gt;But… delegate and help your teammates grow&lt;/h2&gt;

&lt;p&gt;Although you’re there to protect your team and help them focus on writing code, you shouldn’t take away all non-coding activities from them. &lt;/p&gt;

&lt;p&gt;You don’t have to be the only person who onboards new team members, defines architecture, and fleshes out user stories with product managers. &lt;/p&gt;

&lt;p&gt;If you do that, you’ll soon end up being a bottleneck for your team. Moreover, you’ll prevent your team members from growing professionally.&lt;/p&gt;

&lt;p&gt;Instead, identify activities which your teammates are interested in and let them run with that.&lt;/p&gt;

&lt;p&gt;If you happen to be their line manager, it’s double as important to do that, as it’ll help them with their career growth. And if you’re not line managing your team, you may pair up with their manager and find out what career aspirations your colleagues have and give them a chance to go in that direction.&lt;/p&gt;

&lt;h1 id=&quot;communicate-to-provide-clarity&quot;&gt;Communicate to provide clarity&lt;/h1&gt;

&lt;p&gt;It’s your job as a tech lead to communicate and provide clarity. The product team may need to know how long some features will take - and you will have to tell a Product Manager that feature XYZ will take longer because the team needs to do essential refactoring.&lt;/p&gt;

&lt;p&gt;Equally, your team needs to know that there might be a change in a product direction in two months, hence it is worthwhile to invest time in bringing framework ABC.&lt;/p&gt;

&lt;h1 id=&quot;partner-with-product&quot;&gt;Partner with product&lt;/h1&gt;

&lt;p&gt;I have already mentioned working closely with product managers a few times. Here I want to stress why it is important and a few usual things you have to do.&lt;/p&gt;

&lt;p&gt;First of all, you’re the main point of contact for all things technical to the product and other departments (if you are working on B2B software you may also have to interact with sales and professional services). So do expect a lot of questions from them about timelines and feasibility of their ambitious ideas.&lt;/p&gt;

&lt;p&gt;But working with the product team is more than just answering their questions, it is also about being proactive. It is up to you to help them to build a roadmap. It is up to you to say that certain features are not possible without doing an essential technical work. It is up to you to say that all feature work should stop and you have to move to a different framework.&lt;/p&gt;

&lt;p&gt;Equally, it is for you to say that some features are less complex than they thought before and that you can do them now.&lt;/p&gt;

&lt;h2 id=&quot;but-then-again-help-your-fellow-engineers-engage-with-product&quot;&gt;But… then again help your fellow engineers engage with product&lt;/h2&gt;

&lt;p&gt;Yes, you should protect engineers’ time, so don’t invite them to all the meetings. &lt;/p&gt;

&lt;p&gt;But every software engineer is still interested to know which features they’ll be coding in six months’ time. Every software engineer has great ideas on how to improve the product.&lt;/p&gt;

&lt;p&gt;So make that happen - make sure that the product team talks to engineers about product plans and that they all sit together to flesh out user stories.&lt;/p&gt;

&lt;h1 id=&quot;trust-your-team&quot;&gt;Trust your team&lt;/h1&gt;

&lt;p&gt;A tech lead should trust their team to make the best decisions. If someone wants to introduce a 3rd party library XYZ for doing ABC, then let them do it. If your colleague proposes re-designing a part of the system, let them do it, too.&lt;/p&gt;

&lt;h2 id=&quot;but-be-prepared-to-ask-question-in-a-helpful-way&quot;&gt;But… be prepared to ask question in a helpful way&lt;/h2&gt;

&lt;p&gt;Whether it’s choosing a 3rd party library or deciding on architecture, make sure your colleagues have considered alternatives and impact on maintainability, project timelines, performance, security, etc. Feel free to ask questions about that.&lt;/p&gt;

&lt;p&gt;Equally be prepared to step in and guide your fellow developers. For instance, if you notice that some tasks are taking much longer than expected, do speak to engineers who are working on them. They may be busy trying to consider every possible edge case that may never happen or do refactoring that should be a separate task. Help your team to avoid such rabbit holes.&lt;/p&gt;

&lt;h1 id=&quot;be-strategic-and-stay-technical&quot;&gt;Be strategic and stay technical&lt;/h1&gt;

&lt;p&gt;As a technical lead you should look ahead and be strategic. More specifically, you should:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Collaboratively establish architecture and coding standards&lt;/li&gt;
  &lt;li&gt;Prioritise working on technical debt&lt;/li&gt;
  &lt;li&gt;Look into newer version of the tools you use and make sure that you keep your codebase up to date&lt;/li&gt;
  &lt;li&gt;See what other technologies are available and how they can help your team&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;And that is impossible without you staying on the bleeding edge of technology. Remember, technical lead does have ‘Technical’ in it. &lt;/p&gt;

&lt;p&gt;Yes, it’s a people intensive role, but it is also about technology. And on that note…&lt;/p&gt;

&lt;h1 id=&quot;be-clear-on-how-much-time-you-can-spend-coding&quot;&gt;Be clear on how much time you can spend coding&lt;/h1&gt;

&lt;p&gt;A technical lead is expected to code. But how much can vary significantly week by week. Sometimes, you’ll have the luxury of spending 80% of your time coding away new features. Sometimes, it’ll be only 20% of your time.&lt;/p&gt;

&lt;p&gt;What is important is to set expectations with your colleagues. No-one would mind if you say that next week you’ll be able to only commit 30% of your time to writing code. But they will certainly be less happy if you forget to mention that. And that includes both other engineers, who may wait for you to redesign an API endpoint, or product managers who expect you to finish that feature that all users want to see.&lt;/p&gt;

&lt;h1 id=&quot;work-with-engineering-managers-if-youre-not-line-managing-your-team&quot;&gt;Work with engineering managers (if you’re not line managing your team)&lt;/h1&gt;

&lt;p&gt;Often as a tech lead you don’t have line management responsibilities, but it is often you who knows your teammates the best and it is you who can help them to get a promotion, salary increase, bonus, more equity, etc. &lt;/p&gt;

&lt;p&gt;So do spend some time with their line manager and pass on feedback. Plus, their line manager can also tell you where you can help your colleagues in their career. You may even want to establish a pattern that you speak to their line manager and pass feedback on before their 1:2:1’s.&lt;/p&gt;

&lt;h1 id=&quot;finally&quot;&gt;Finally&lt;/h1&gt;

&lt;p&gt;Tech lead is a great role. It allows you to write code and gain exposure to leadership, people, and product. But remember it’s not about you, but about helping you team to succeed!&lt;/p&gt;

&lt;h1 id=&quot;related-posts&quot;&gt;Related posts&lt;/h1&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;/post/managing-technical-debt/&quot;&gt;Managing technical debt&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/post/split-user-stories-get-value-early/&quot;&gt;Split User Stories Ruthlessly - And Get Value Earlier&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
        <pubDate>Sat, 16 Jan 2021 00:00:00 +0000</pubDate>
        <link>https://mikeborozdin.com/post/being-effective-tech-lead</link>
        <guid isPermaLink="true">https://mikeborozdin.com/post/being-effective-tech-lead</guid>
        
        
      </item>
    
      <item>
        <title>Track a Virus: Open Source COVID-19 Dashboard</title>
        <description>&lt;p&gt;We live in desperate times. And more than ever we need to make decisions based on hard data and collaborate with each other.&lt;/p&gt;

&lt;p&gt;So in the spirit of that, I’ve released an open source &lt;a href=&quot;https://www.trackavirus.app/&quot;&gt;COVID-19 Dashboard&lt;/a&gt;. 
&lt;!-- more --&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;&lt;a href=&quot;https://www.trackavirus.app/&quot;&gt;You can play with it here.&lt;/a&gt;&lt;/strong&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/mikeborozdin/track-a-virus&quot;&gt;And see its source code on GitHub.&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;It’s written with React, TypeScript, and MobX&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Its key features are:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Comparison between different countries&lt;/li&gt;
  &lt;li&gt;Ability to see daily changes in a number of cases and deaths&lt;/li&gt;
  &lt;li&gt;Snapshot of the data across the whole world&lt;/li&gt;
  &lt;li&gt;And the ambition is to provide the most comprehensive COVID-19 dashboard, so your code contributions are more than welcome :-)&lt;/li&gt;
  &lt;li&gt;Data by the John Hopkins university&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;/images/trackavirus/screenshot.png&quot; alt=&quot;screenshot&quot; class=&quot;center-image&quot; /&gt;&lt;/p&gt;

&lt;h1 id=&quot;country-comparison&quot;&gt;Country comparison&lt;/h1&gt;

&lt;p&gt;You can easily compare countries and see that while China flattened the curve in February a number of infections keeps going up.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/trackavirus/daily-cases-country-comparison.png&quot; alt=&quot;number of cases screenshot&quot; class=&quot;center-image&quot; /&gt;&lt;/p&gt;

&lt;h1 id=&quot;daily-increase&quot;&gt;Daily increase&lt;/h1&gt;

&lt;p&gt;The dashboard also gives positive news and says that the peak of the epidemic has passed in Italy.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/trackavirus/daily-increase-one-country.png&quot; alt=&quot;daily increase screenshot&quot; class=&quot;center-image&quot; /&gt;&lt;/p&gt;

&lt;h1 id=&quot;world-snapshot&quot;&gt;World snapshot&lt;/h1&gt;

&lt;p&gt;Finally, you can see a quick snapshot of the data aggregated across the entire world.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/trackavirus/world-snapshot.png&quot; alt=&quot;daily increase screenshot&quot; class=&quot;center-image&quot; /&gt;&lt;/p&gt;

&lt;h1 id=&quot;why-another-dashboard&quot;&gt;Why another dashboard?&lt;/h1&gt;

&lt;p&gt;You may wonder why another dashboard. It is true, there are a number of dashboards available. In particular, &lt;a href=&quot;https://dev.to/trekhleb/i-ve-open-sourced-a-simple-coronavirus-covid-19-dashboard-react-chart-js-bootstraptable-4i49&quot;&gt;the one by Oleksii Trekhleb&lt;/a&gt; looks similar. There are a few key aspects about this one:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Focus on trends, country comparisons, and aggregated global data
    &lt;ul&gt;
      &lt;li&gt;From the day 1 the dashboard includes daily increases for a number of cases and deaths&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/mikeborozdin/track-a-virus/projects/1&quot;&gt;There is a whole roadmap of the new features&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;There are plans to add a &lt;a href=&quot;https://github.com/mikeborozdin/track-a-virus/issues/19&quot;&gt;growth rate&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;https://github.com/mikeborozdin/track-a-virus/issues/11&quot;&gt;Mortality figures&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;(https://github.com/mikeborozdin/track-a-virus/projects/1)&quot;&gt;and so on&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Our tech stack and architecture enables developers easily build new features:
    &lt;ul&gt;
      &lt;li&gt;React, TypeScript, Chart.js - is a fairly standard stack&lt;/li&gt;
      &lt;li&gt;I’ve focused on the code quality to make sure it’s easy to navigate around the code and add new functionality&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;I’ve also &lt;a href=&quot;https://github.com/mikeborozdin/track-a-virus/blob/master/CONTRIBUTING.md&quot;&gt;provided contribution guidelines&lt;/a&gt; that explains the architecture for people who wants to help with the project
    &lt;ul&gt;
      &lt;li&gt;It provides a whole tutorial on how to write a new dashboard component&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;of-course-it-is-not-perfect&quot;&gt;Of course, it is not perfect&lt;/h1&gt;

&lt;ul&gt;
  &lt;li&gt;There are a number of thing which needs to be fixed or added&lt;/li&gt;
  &lt;li&gt;For example, the percentage increase chart above may not accurately represents the trends. But there’s already a plan to add a &lt;a href=&quot;https://github.com/mikeborozdin/track-a-virus/issues/19&quot;&gt;growth rate&lt;/a&gt; which could be better it.&lt;/li&gt;
  &lt;li&gt;That’s just the beginning and more features are coming out next week. &lt;/li&gt;
  &lt;li&gt;And development can go faster if you join the project :-).&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;lets-try-to-flatten-the-curve-together&quot;&gt;Let’s try to flatten the curve together&lt;/h1&gt;

&lt;p&gt;Interested? &lt;a href=&quot;https://github.com/mikeborozdin/track-a-virus&quot;&gt;Let’s work on it together&lt;/a&gt;!&lt;/p&gt;
</description>
        <pubDate>Sat, 11 Apr 2020 00:00:00 +0000</pubDate>
        <link>https://mikeborozdin.com/post/trackavirus-open-source-covid-19-dashboard</link>
        <guid isPermaLink="true">https://mikeborozdin.com/post/trackavirus-open-source-covid-19-dashboard</guid>
        
        
      </item>
    
      <item>
        <title>Move from Redux to MobX - reduce boilerplate</title>
        <description>&lt;p&gt;MobX is a statement management library. Unlike Redux it doesn’t require a lot of boilerplate code. In this post we’ll talk how you can benefit from using MobX vs Redux.&lt;/p&gt;

&lt;!-- more --&gt;

&lt;h1 id=&quot;video-version&quot;&gt;Video version&lt;/h1&gt;

&lt;p&gt;There’s a video version of this article that I originally recorded for &lt;a href=&quot;https://www.meetup.com/React-Native-London/&quot;&gt;the React Native London&lt;/a&gt;. If you prefer to read text, just scroll below.&lt;/p&gt;

&lt;div style=&quot;display: flex; justify-content: center;&quot;&gt;
  &lt;iframe width=&quot;560&quot; height=&quot;315&quot; src=&quot;https://www.youtube.com/embed/3Gt-Cxjld3g&quot; frameborder=&quot;0&quot; allow=&quot;accelerometer; encrypted-media; gyroscope; picture-in-picture&quot; allowfullscreen=&quot;&quot;&gt;&lt;/iframe&gt;
&lt;/div&gt;

&lt;h1 id=&quot;problem-with-redux&quot;&gt;Problem with Redux&lt;/h1&gt;

&lt;p&gt;Redux is great for extracting application state and business logic out of components. However, you end up with a lot of boilerplate. Your code will be scattered around many different place. Think of a typical user action - usually, you have to write an action definition, an action creator, and finally a reducer. Now, imagine you have a bug in that action - you’ll have to trace it in at least two different places - an action creator and a reducer.&lt;/p&gt;

&lt;p&gt;This tweet by Ben Lesh - a member of the RxJS core team - perfectly summarises that.&lt;/p&gt;

&lt;div style=&quot;display: flex; justify-content: center;&quot;&gt;
  &lt;blockquote class=&quot;twitter-tweet&quot;&gt;&lt;p lang=&quot;en&quot; dir=&quot;ltr&quot;&gt;Redux: You know EXACTLY where your state is.&lt;br /&gt;&lt;br /&gt;...You just don&amp;#39;t know where the code that manages your state is.&lt;/p&gt;&amp;mdash; Ben Lesh (@BenLesh) &lt;a href=&quot;https://twitter.com/BenLesh/status/1241525265228017670?ref_src=twsrc%5Etfw&quot;&gt;March 22, 2020&lt;/a&gt;&lt;/blockquote&gt; &lt;script async=&quot;&quot; src=&quot;https://platform.twitter.com/widgets.js&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt;
&lt;/div&gt;

&lt;h1 id=&quot;enter-mobx&quot;&gt;Enter MobX&lt;/h1&gt;

&lt;p&gt;&lt;a href=&quot;https://mobx.js.org/&quot;&gt;MobX&lt;/a&gt; allows you to manage your state in a far more concise way. It’s a fairly simple library that you can get started with in almost no time. It’s got more than 400k+ weekly downloads on NPM. And many companies, including mine, use it in production.&lt;/p&gt;

&lt;p&gt;Unlike, Redux, it’s not afraid to mutate state. In fact, it’s based on &lt;a href=&quot;https://en.wikipedia.org/wiki/Observer_pattern&quot;&gt;the observer pattern&lt;/a&gt; which is all about mutations and reactions to them.&lt;/p&gt;

&lt;p&gt;Instead of doing a theoretical introduction of MobX, I’ll use an example. We’ll build a simple application first with Redux and then’ll we’ll move it to Mobx, while gradually explaining its concepts.&lt;/p&gt;

&lt;h1 id=&quot;sample-app&quot;&gt;Sample app&lt;/h1&gt;

&lt;p&gt;The sample app is a classis todo app:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;You can see a list of todo items&lt;/li&gt;
  &lt;li&gt;You can add new ones&lt;/li&gt;
  &lt;li&gt;And all of that will be done via the API calls
    &lt;ul&gt;
      &lt;li&gt;That’s to make comparison between Redux and MobX more interesting&lt;/li&gt;
      &lt;li&gt;After all, in real world we get and save data via APIs most of the time&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;/images/redux-vs-mobx/todo-app.jpg&quot; alt=&quot;todo app screenshot&quot; class=&quot;center-image&quot; /&gt;&lt;/p&gt;

&lt;h1 id=&quot;app-code-with-redux&quot;&gt;App code with Redux&lt;/h1&gt;

&lt;p&gt;First of all, the Redux app needs action creators.&lt;/p&gt;

&lt;p&gt;There’ll be two action creators:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;code&gt;addTodo()&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;&lt;code&gt;getTodos()&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Since we need to send API requests, there’ll be a bit of complexity - we’ll have to return a function an &lt;code&gt;async&lt;/code&gt; function from the action creators.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;&lt;code&gt;store/action-creators.js&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span class=&quot;k&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;GET_TODOS&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;./constants&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;addTodo&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;todo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;dispatch&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;fetch&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;http://localhost:9999/todos&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;method&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;post&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;body&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;todo&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;

    &lt;span class=&quot;nx&quot;&gt;dispatch&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;getTodos&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;());&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;getTodos&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;dispatch&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;res&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;fetch&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;http://localhost:9999/todos&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

    &lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;todos&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;res&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;json&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;

    &lt;span class=&quot;nx&quot;&gt;dispatch&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;({&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;GET_TODOS&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;nx&quot;&gt;todos&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Then we need to add reducers that will set the initial state and modify it once the actions are dispatched.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;&lt;code&gt;store/reducers.js&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span class=&quot;k&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ADD_TODO&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;GET_TODOS&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;./constants&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;initialState&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;todos&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;

&lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;todos&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;state&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;initialState&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;action&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;switch&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;action&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;ADD_TODO&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;state&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;todos&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[...&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;state&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;todos&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;action&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;todo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;GET_TODOS&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;state&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;todos&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;action&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;todos&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;nl&quot;&gt;default&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;state&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;We need to throw a few constants in the mix, so that the reducers module doesn’t depend on the action creator one and vice versa.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;&lt;code&gt;store/constants.js&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span class=&quot;k&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;default&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;todos&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ADD_TODO&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;ADD_TODO&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;GET_TODOS&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;GET_TODOS&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Finally, we need to wire it app together and call &lt;code&gt;createStore()&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;&lt;code&gt;store/store.jsx&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-jsx&quot; data-lang=&quot;jsx&quot;&gt;&lt;span class=&quot;k&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;applyMiddleware&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;createStore&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;redux&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;thunkMiddleware&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;redux-thunk&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;todos&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;./reducers&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;default&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;createStore&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;todos&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;applyMiddleware&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;thunkMiddleware&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h2 id=&quot;redux-store-so-far&quot;&gt;Redux store so far&lt;/h2&gt;

&lt;p&gt;It feels like we had to write a lot of code for such a small application, doesn’t it?&lt;/p&gt;

&lt;h2 id=&quot;redux-wiring&quot;&gt;Redux wiring&lt;/h2&gt;

&lt;p&gt;As the final step we have to inject the store into the application context:&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;&lt;code&gt;index.jsx&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-jsx&quot; data-lang=&quot;jsx&quot;&gt;&lt;span class=&quot;k&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;React&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;react&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ReactDOM&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;react-dom&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Provider&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;react-redux&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;store&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;./store/store&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;App&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;./App&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;nx&quot;&gt;ReactDOM&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;render&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;React&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;StrictMode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Provider&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;store=&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;store&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;App&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;/&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Provider&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;React&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;StrictMode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;,&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;document&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;getElementById&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;root&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h2 id=&quot;components&quot;&gt;Components&lt;/h2&gt;

&lt;p&gt;What about the components. We left them till the end, but they are not particularly complicated:&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;&lt;code&gt;Todos/Todos.jsx&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-jsx&quot; data-lang=&quot;jsx&quot;&gt;&lt;span class=&quot;k&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;React&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;useEffect&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;react&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;connect&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;react-redux&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;getTodos&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;../store/action-creators&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;./Todo.css&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Todos&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;({&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;todos&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;getTodos&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;useEffect&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;getTodos&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;getTodos&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]);&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;div&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;className=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&#39;list&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;si&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;todos&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;todo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;index&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;div&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;key=&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;index&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;className=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&#39;todo&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;todo&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;div&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;div&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;

&lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;mapStateToProps&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;state&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;({&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;todos&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;state&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;todos&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;

&lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;mapDispatchToProps&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;dispatch&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;({&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;getTodos&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;dispatch&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;getTodos&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;default&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;connect&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;mapStateToProps&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;mapDispatchToProps&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;Todos&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;&lt;code&gt;Todos/Todos.jsx&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-jsx&quot; data-lang=&quot;jsx&quot;&gt;&lt;span class=&quot;k&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;React&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;useState&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;react&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;connect&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;react-redux&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;addTodo&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;../store/action-creators&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;./NewTodo.css&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;NewTodo&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;({&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;addTodo&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;todo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;setTodo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;useState&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&#39;&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;div&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;input&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;type=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&#39;text&#39;&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;onChange=&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;e&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;setTodo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;target&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;placeholder=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&#39;New todo item...&#39;&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;className=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&#39;new-todo&#39;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;/&amp;gt;&lt;/span&gt;

      &lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;button&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;onClick=&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;addTodo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;todo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;className=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&#39;new-todo-button&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt;
        Add a new todo
        &lt;span class=&quot;p&quot;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;button&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;div&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;

&lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;mapDispatchToProps&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;dispatch&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;({&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;addTodo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;todo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;dispatch&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;addTodo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;todo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;default&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;connect&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;mapDispatchToProps&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;NewTodo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h1 id=&quot;enter-mobx-1&quot;&gt;Enter MobX&lt;/h1&gt;

&lt;p&gt;Now, remember a very verbose Redux store we wrote? Let’s see how we re-write it in MobX.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span class=&quot;k&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;observable&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;action&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;mobx&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;default&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;TodoStore&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;nd&quot;&gt;observable&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;todos&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;

  &lt;span class=&quot;p&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;nd&quot;&gt;action&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;addTodo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;todo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;fetch&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;http://localhost:9999/todos&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;method&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;post&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;body&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;todo&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;getTodos&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;p&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;nd&quot;&gt;action&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;getTodos&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;res&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;fetch&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;http://localhost:9999/todos&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

    &lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;todos&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;res&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;json&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;todos&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;todos&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;And that’s it! Those mere 25 lines of code replace Redux’s action creators, reducers, and the other bits!&lt;/p&gt;

&lt;p&gt;Now, we have a very concise store that both has an application state and business logic, yet doesn’t mix them together. Indeed, MobX stores are a great answer to the question - ‘Where do I put my business logic and HTTP calls in React?’. Also, MobX stores are extremely easy to unit test.&lt;/p&gt;

&lt;p&gt;Okay, but how is it possible? Let’s dive into the code.&lt;/p&gt;

&lt;h2 id=&quot;mobx-observables&quot;&gt;MobX observables&lt;/h2&gt;

&lt;p&gt;First of all, we declare an array that will hold todo items and mark it as an &lt;code&gt;observable&lt;/code&gt;:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span class=&quot;p&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;nd&quot;&gt;observable&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;todos&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;What does the &lt;code&gt;@observable&lt;/code&gt; annotation mean? It means that all the changes to the array will be monitored and all the &lt;code&gt;observers&lt;/code&gt; will be notified? What are the observers? Usually, they are React components that reference &lt;code&gt;observables&lt;/code&gt;. And they are re-rendered if corresponding &lt;code&gt;observables&lt;/code&gt; change. We’ll have a look at it below.&lt;/p&gt;

&lt;p&gt;Now, having declared the data, we need to declare operations that can be performed on it. And, in our case, there are two:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Adding a new item&lt;/li&gt;
  &lt;li&gt;Getting todos&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;And you can see that they are declared as class methods and have the &lt;code&gt;@action&lt;/code&gt; annotation:&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;&lt;code&gt;store/store.js&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span class=&quot;p&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;nd&quot;&gt;action&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;addTodo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;todo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;fetch&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;http://localhost:9999/todos&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;method&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;post&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;body&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;todo&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;getTodos&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;p&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;nd&quot;&gt;action&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;getTodos&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;res&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;fetch&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;http://localhost:9999/todos&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

  &lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;todos&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;res&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;json&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;todos&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;todos&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Both &lt;code&gt;addTodo()&lt;/code&gt; and &lt;code&gt;getTodos()&lt;/code&gt; are just regular functions that make HTTP calls and update some data. The only two special things are:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;They have the &lt;code&gt;@action&lt;/code&gt; annotation&lt;/li&gt;
  &lt;li&gt;The data they modify - &lt;code&gt;this.todos&lt;/code&gt; is marked as &lt;code&gt;@observable&lt;/code&gt;.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Why does the methods need to be annotated with &lt;code&gt;@action?&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;First of all, it’s a nice convention that clearly marks methods that modify observable data. Secondly, MobX does performance optimisation if observable data is mutated in an action. Finally, MobX has a strict mode that would throw an exception if observables are modified outside of the actions.&lt;/p&gt;

&lt;p&gt;Finally, you need to change the root of your application to this:&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;&lt;code&gt;index.jsx&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-jsx&quot; data-lang=&quot;jsx&quot;&gt;&lt;span class=&quot;k&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;React&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;react&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ReactDOM&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;react-dom&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Provider&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;mobx-react&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;TodoStore&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;./store/store&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;App&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;./App&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;nx&quot;&gt;ReactDOM&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;render&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;React&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;StrictMode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Provider&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;todoStore=&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;TodoStore&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;App&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;/&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Provider&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;React&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;StrictMode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;,&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;document&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;getElementById&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;root&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;It’s almost exactly the same as the one for Redux. The only difference is that we import &lt;code&gt;Provider&lt;/code&gt; from a different module.&lt;/p&gt;

&lt;h1 id=&quot;components-in-mobx---observers&quot;&gt;Components in MobX - &lt;code&gt;observers&lt;/code&gt;&lt;/h1&gt;

&lt;p&gt;Okay, we have re-written the store in MobX. It does look much more concise than the one in Redux. But what about the components? Will they need much re-write?&lt;/p&gt;

&lt;p&gt;Luckily, no! Let’s examine the &lt;code&gt;Todos&lt;/code&gt; component that is now MobX enabled:&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;&lt;code&gt;Todos/Todos.jsx&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-jsx&quot; data-lang=&quot;jsx&quot;&gt;&lt;span class=&quot;k&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;React&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;useEffect&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;react&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;observer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;inject&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;mobx-react&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;./Todo.css&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Todos&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;({&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;todoStore&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;useEffect&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;todoStore&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;getTodos&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;todoStore&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]);&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;div&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;className=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&#39;list&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;si&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;todoStore&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;todos&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;todo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;index&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;div&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;key=&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;index&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;className=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&#39;todo&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;todo&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;div&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;div&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;default&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;inject&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(({&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;todoStore&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;({&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;todoStore&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}))(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;observer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;Todos&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;As you can see the component stayed largely unchanged. Similarly, to the Redux version it receives a property, but this time the property contains a MobX store that have a list of todos. It doesn’t need need the &lt;code&gt;mapStateToProps()&lt;/code&gt;. Instead, of &lt;code&gt;connect()&lt;/code&gt; we have &lt;code&gt;inject()&lt;/code&gt; that, as the name suggests, injects the data store into the component.&lt;/p&gt;

&lt;p&gt;The most crucial thing that the component is wrapped inside the &lt;code&gt;observer()&lt;/code&gt; function. As mentioned before, components wrapped inside &lt;code&gt;observer()&lt;/code&gt; will be re-rendered once &lt;code&gt;observable&lt;/code&gt; change. &lt;/p&gt;

&lt;p&gt;Will all &lt;code&gt;observer&lt;/code&gt; components re-render if any &lt;code&gt;observable&lt;/code&gt; changes?&lt;/p&gt;

&lt;p&gt;No! MobX is smart enough only to trigger re-rendering of the components read &lt;code&gt;observables&lt;/code&gt; that get changed. For example, if you have a component that reads from the &lt;code&gt;observable&lt;/code&gt; called &lt;code&gt;todos&lt;/code&gt;, but it the the &lt;code&gt;@observable employees&lt;/code&gt; that gets changed, then your component will not be re-rendered.&lt;/p&gt;

&lt;h2 id=&quot;what-about-components-that-modify-data&quot;&gt;What about components that modify data?&lt;/h2&gt;

&lt;p&gt;Easy!&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;&lt;code&gt;NewTodo/NewTodo.jsx&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-jsx&quot; data-lang=&quot;jsx&quot;&gt;&lt;span class=&quot;k&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;React&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;useState&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;react&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;inject&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;mobx-react&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;./NewTodo.css&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;NewTodo&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;({&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;todoStore&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;todo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;setTodo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;useState&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&#39;&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;div&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;input&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;type=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&#39;text&#39;&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;onChange=&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;e&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;setTodo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;target&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;placeholder=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&#39;New todo item...&#39;&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;className=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&#39;new-todo&#39;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;/&amp;gt;&lt;/span&gt;

      &lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;button&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;onClick=&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;todoStore&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;addTodo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;todo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;className=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&#39;new-todo-button&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt;
        Add a new todo
      &lt;span class=&quot;p&quot;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;button&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;div&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;default&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;inject&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(({&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;todoStore&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;({&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;todoStore&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}))(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;NewTodo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Once again, it’s very similar to its Redux version. And unlike the &lt;code&gt;Todos&lt;/code&gt; component we don’t need to wrap it inside &lt;code&gt;observer&lt;/code&gt;. Indeed, &lt;code&gt;NewTodo&lt;/code&gt; doesn’t need to be rendered when &lt;code&gt;todos&lt;/code&gt; change. We just need to inject the store with &lt;code&gt;inject()&lt;/code&gt;. &lt;/p&gt;

&lt;h1 id=&quot;source-code&quot;&gt;Source code&lt;/h1&gt;

&lt;p&gt;The source code of both the Redux and the MobX version is available on &lt;a href=&quot;https://github.com/mikeborozdin/todo-app-mobx-vs-redux&quot;&gt;Github&lt;/a&gt;. It also includes the API server. So you can all run it.&lt;/p&gt;

&lt;h1 id=&quot;conclusion&quot;&gt;Conclusion&lt;/h1&gt;
&lt;ul&gt;
  &lt;li&gt;MobX is a great and mature solution for state management of React applications&lt;/li&gt;
  &lt;li&gt;You’ll have almost zero boilerplate in comparison to Redux&lt;/li&gt;
  &lt;li&gt;MobX stores are great place for business logic and HTTP requests&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://mobx.js.org/&quot;&gt;Give it a try&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;Have questions? There might be a few answers below&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;qa&quot;&gt;Q&amp;amp;A&lt;/h1&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;What about hooks?&lt;/strong&gt;
    &lt;ul&gt;
      &lt;li&gt;The example above shows that MobX works nicely with React hooks such as &lt;code&gt;useEffect()&lt;/code&gt; and &lt;code&gt;useState()&lt;/code&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;But React Redux also has &lt;code&gt;useSelector()&lt;/code&gt; and &lt;code&gt;useDispatch()&lt;/code&gt;?&lt;/strong&gt;
    &lt;ul&gt;
      &lt;li&gt;So does MobX React have &lt;code&gt;useObserver()&lt;/code&gt; and &lt;code&gt;useStores()&lt;/code&gt; that you can use instead of &lt;code&gt;observer()&lt;/code&gt; and &lt;code&gt;inject()&lt;/code&gt;.&lt;/li&gt;
      &lt;li&gt;Personally, I prefer the HoCs - &lt;code&gt;observer()&lt;/code&gt; and &lt;code&gt;inject()&lt;/code&gt; because they make it easier to unit test components. But that could be a matter of taste.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Can you have more than one store?&lt;/strong&gt;
    &lt;ul&gt;
      &lt;li&gt;Easily! You can have as many stores as you want.&lt;/li&gt;
      &lt;li&gt;I recommend having a store per feature&lt;/li&gt;
      &lt;li&gt;We have around 15 stores on the product I’m working on&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Does it come with debug tools?&lt;/strong&gt;
    &lt;ul&gt;
      &lt;li&gt;MobX comes with a great &lt;a href=&quot;https://mobx.js.org/best/trace.html&quot;&gt;trace module&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;Plus, you can use the standard React devtools to understand why components got re-rendered&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Do you have to use ES decorators?&lt;/strong&gt;
    &lt;ul&gt;
      &lt;li&gt;No. Each ES decorator has a corresponding function which allows to wrap your variables/class properties and components&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Does MobX work with any kind of component?&lt;/strong&gt;
    &lt;ul&gt;
      &lt;li&gt;You can mark ‘fat’ and simple functional components as &lt;code&gt;observer&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;But you cannot do that with &lt;code&gt;PureComponents&lt;/code&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;
</description>
        <pubDate>Thu, 02 Apr 2020 00:00:00 +0000</pubDate>
        <link>https://mikeborozdin.com/post/redux-to-mobx</link>
        <guid isPermaLink="true">https://mikeborozdin.com/post/redux-to-mobx</guid>
        
        
      </item>
    
      <item>
        <title>Shallow rendering &amp; React Hooks. And why shallow rendering is good</title>
        <description>&lt;p&gt;Now you can use shallow rendering for testing React components with hooks. And a few words on why shallow rendering is good.&lt;/p&gt;

&lt;!-- more --&gt;

&lt;h1 id=&quot;shallow-rendering--react-hooks&quot;&gt;Shallow Rendering &amp;amp; React Hooks&lt;/h1&gt;

&lt;p&gt;Up until recently it was tricky to use shallow rendering and libraries like &lt;code&gt;enzyme&lt;/code&gt; for testing React components that relied on hooks like &lt;code&gt;useEffect()&lt;/code&gt; and &lt;code&gt;useLayoutEffect()&lt;/code&gt;. So I’ve released a library - &lt;a href=&quot;https://github.com/mikeborozdin/jest-react-hooks-shallow&quot;&gt;jest-react-hooks-shallow&lt;/a&gt; - that brings those hooks to shallow rendering. &lt;/p&gt;

&lt;p&gt;All you need to do is to download the library:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;npm &lt;span class=&quot;nb&quot;&gt;install&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--save-dev&lt;/span&gt; jest-react-hooks-shallow
&lt;span class=&quot;c&quot;&gt;# or&lt;/span&gt;
yarn add &lt;span class=&quot;nt&quot;&gt;--dev&lt;/span&gt; jest-react-hooks-shallow&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;and add these lines to your Jest setup file (specified by &lt;code&gt;setupFilesAfterEnv&lt;/code&gt;):&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span class=&quot;k&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;enableHooks&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;jest-react-hooks-shallow&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// pass an instance of jest to `enableHooks()`&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;enableHooks&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;jest&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;And voilà - &lt;code&gt;useEffect()&lt;/code&gt; and &lt;code&gt;useLayoutEffect()&lt;/code&gt; will work with shallow rendering. From this moment on your test don’t need to know anything about &lt;code&gt;useEffect()&lt;/code&gt;. After all, it’s a mere implementation detail.&lt;/p&gt;

&lt;h1 id=&quot;testing&quot;&gt;Testing&lt;/h1&gt;

&lt;p&gt;So if you have a component like this:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-jsx&quot; data-lang=&quot;jsx&quot;&gt;&lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ComponentWithHooks&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;setText&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;useState&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
  &lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;buttonClicked&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;setButtonClicked&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;useState&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;boolean&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

  &lt;span class=&quot;nx&quot;&gt;useEffect&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;setText&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;`Button clicked: &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;buttonClicked&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;toString&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; 
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;buttonClicked&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;div&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;div&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;div&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;button&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;onClick=&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;setButtonClicked&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt;Click me&lt;span class=&quot;p&quot;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;button&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;div&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;You can easily test it with code like this:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-jsx&quot; data-lang=&quot;jsx&quot;&gt;&lt;span class=&quot;nx&quot;&gt;test&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;Renders default message and updates it on clicking a button&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;component&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;shallow&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&amp;lt;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;App&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;/&amp;gt;);&lt;/span&gt;

  &lt;span class=&quot;nx&quot;&gt;expect&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;component&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()).&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;toContain&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;Button clicked: false&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

  &lt;span class=&quot;nx&quot;&gt;component&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;find&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;button&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;simulate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;click&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

  &lt;span class=&quot;nx&quot;&gt;expect&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;component&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()).&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;toContain&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;Button clicked: true&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Please note, that those tests didn’t have to import anything else. They simply don’t know that a component calls &lt;code&gt;useEffect()&lt;/code&gt;. Yet, it’s being called when you invoke &lt;code&gt;shallow()&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;That said, often you want to test that a specific function has been called on some event. For example, you’re calling a Redux action creator or a Mobx action. If you’re using React Hooks, chances are you’ll pass that function as a callback to &lt;code&gt;useEffect()&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;No problems! You can easily test it with simple Jest mocks.&lt;/p&gt;

&lt;p&gt;Say, we have a component like this:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-jsx&quot; data-lang=&quot;jsx&quot;&gt;&lt;span class=&quot;k&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;someAction&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;./some-action&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ComponentWithHooks&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;setText&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;useState&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
  &lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;buttonClicked&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;setButtonClicked&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;useState&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;boolean&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

  &lt;span class=&quot;nx&quot;&gt;useEffect&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;someAction&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;buttonClicked&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]);&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;div&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;div&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;div&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;button&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;onClick=&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;setButtonClicked&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt;Click me&lt;span class=&quot;p&quot;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;button&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;div&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;test&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;Calls `myAction()` on the first render and on clicking the button`&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;component&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;shallow&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&amp;lt;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;App&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;/&amp;gt;);&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;expect&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;callback&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;toHaveBeenCalledTimes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

  &lt;span class=&quot;nx&quot;&gt;component&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;find&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;button&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;simulate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;click&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;expect&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;callback&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;toHaveBeenCalledTimes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;You can find out more about &lt;code&gt;jest-react-hooks-shallow&lt;/code&gt; &lt;a href=&quot;https://github.com/mikeborozdin/jest-react-hooks-shallow&quot;&gt;on its Github page&lt;/a&gt;.&lt;/p&gt;

&lt;h1 id=&quot;why-shallow-rendering&quot;&gt;Why shallow rendering?&lt;/h1&gt;

&lt;p&gt;Some people may say why bring React Hooks to enzyme when there’s a trend to use full rendering with libraries like &lt;code&gt;react-testing-library&lt;/code&gt;. I’ve even sparked an interesting discussion on that when I posted about &lt;code&gt;jest-react-hooks-shallow&lt;/code&gt; on &lt;a href=&quot;https://www.reddit.com/r/javascript/comments/ffcunb/now_you_can_use_shallow_rendering_for_testing/&quot;&gt;Reddit&lt;/a&gt;. You may check these two sub-threads: &lt;a href=&quot;https://www.reddit.com/r/javascript/comments/ffcunb/now_you_can_use_shallow_rendering_for_testing/fjxwyhx/&quot;&gt;one&lt;/a&gt; and &lt;a href=&quot;https://www.reddit.com/r/javascript/comments/ffcunb/now_you_can_use_shallow_rendering_for_testing/fjxubeh/&quot;&gt;two&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;So there are a few good reasons for doing shallow rendering:&lt;/p&gt;

&lt;h2 id=&quot;no-unexpected-side-effects&quot;&gt;No unexpected side-effects&lt;/h2&gt;

&lt;p&gt;Let’s say you have the following component hierarchy:&lt;/p&gt;

&lt;p&gt;&lt;code&gt;
ComponentA -&amp;gt; ComponentB -&amp;gt; ComponentC (makes an HTTP request)
&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;And you’re writing a unit test for &lt;code&gt;ComponentA&lt;/code&gt;. If you render the entire component tree, you tests may not work as expected because of the HTTP request made by &lt;code&gt;ComponentC&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;So you either have to mock component &lt;code&gt;B&lt;/code&gt; - and that would be very similar to doing shallow rendering. Or you would have to mock component &lt;code&gt;C&lt;/code&gt; or provide a stub backend. But the last two options are hardly ideal because they break encapsulation. Your component &lt;code&gt;A&lt;/code&gt; has no knowledge of component &lt;code&gt;C&lt;/code&gt; or any HTTP requests, why would a test for that component require that knowledge?&lt;/p&gt;

&lt;h2 id=&quot;test-driven-development&quot;&gt;Test-driven development&lt;/h2&gt;

&lt;p&gt;Shallow rendering also assists with test-driven development. Let’s take a previous example, but imagine that component &lt;code&gt;A&lt;/code&gt; doesn’t exist, but you have to write, because you need to wrap component &lt;code&gt;B&lt;/code&gt; in another component. So it’ll be far easier to write tests first for a new component that renders the existing ones, when you don’t have to render the entire tree.&lt;/p&gt;

&lt;h2 id=&quot;re-usable-architecture&quot;&gt;Re-usable architecture&lt;/h2&gt;

&lt;p&gt;If you have comprehensive unit tests for your components that don’t rely rendering the whole tree, it’ll be easier make such components re-usable and even extract them to stand-alone libraries.&lt;/p&gt;

&lt;h1 id=&quot;a-few-misconceptions-about-shallow-rendering&quot;&gt;A few misconceptions about shallow rendering&lt;/h1&gt;

&lt;p&gt;There are two popular misconceptions about shallow rendering:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;It forces you to test implementation details&lt;/li&gt;
  &lt;li&gt;It doesn’t test from a user point of view&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;First of all, it is absolutely true that it is bad to test implementation details and you should test from a user’s point of view.&lt;/p&gt;

&lt;p&gt;But shallow rendering does not force use to test implementation details. And it does allow you to test from a user’s point of view.&lt;/p&gt;

&lt;p&gt;There’s a famous example of reading and setting React state in unit tests. This is wrong. You don’t have to that and you can easily test without it.&lt;/p&gt;

&lt;p&gt;Also, testing that your component renders specific child components or passes specific properties is &lt;strong&gt;testing&lt;/strong&gt; implementation details, it is actually testing its behaviour. After all, that’s what your component does - it renders certain elements on certain conditions and passes data to other components.&lt;/p&gt;

&lt;p&gt;Let’s have a look at a few examples on how you can test components that have different behaviour:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;If your component’s purpose to render a piece of text, it’s totally acceptable to test that piece of text is displayed.&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-jsx&quot; data-lang=&quot;jsx&quot;&gt;&lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;MyComponent&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;div&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt;My message&lt;span class=&quot;p&quot;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;div&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

&lt;span class=&quot;nx&quot;&gt;it&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;Renders message&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;component&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;shallow&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&amp;lt;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;MyComponent&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;/&amp;gt;);&lt;/span&gt;

  &lt;span class=&quot;nx&quot;&gt;expect&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;component&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()).&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;toContain&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;My message&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;If your component displays a child component when a certain property is &lt;code&gt;true&lt;/code&gt;, then you need to test that it renders that component when the property is &lt;code&gt;true&lt;/code&gt; and it doesn’t when it is &lt;code&gt;false&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-jsx&quot; data-lang=&quot;jsx&quot;&gt;&lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;MyComponent&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;({&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;displayChild&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;&amp;lt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;si&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;displayChild&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;ChildComponent&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;/&amp;gt;&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;&amp;lt;/&amp;gt;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

&lt;span class=&quot;nx&quot;&gt;it&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;Renders `ChildComponent` when necessary&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;expect&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;shallow&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&amp;lt;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;MyComponent&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;displayChild=&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;/&amp;gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;find&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;ChildComponent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;toHaveLength&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

  &lt;span class=&quot;nx&quot;&gt;expect&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;shallow&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&amp;lt;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;MyComponent&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;displayChild=&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;/&amp;gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;find&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;ChildComponent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;toHaveLength&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;If a component renders a button and hides another a child component when the button is pressed, then we should simulate pressing on a button and checking that a child component is not there.&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-jsx&quot; data-lang=&quot;jsx&quot;&gt;&lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;MyComponent&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;cost&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;displayChild&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;setDisplayChild&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;useState&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;&amp;lt;&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;si&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;displayChild&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;ChildComponent&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;/&amp;gt;&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;button&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;onClick=&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;setDisplayChild&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt;Hide child&lt;span class=&quot;p&quot;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;button&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;&amp;lt;/&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;

&lt;span class=&quot;nx&quot;&gt;it&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;Hides `ChildComponent` after pressing on the button&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;component&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;shallow&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&amp;lt;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;MyComponent&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;/&amp;gt;);&lt;/span&gt;

  &lt;span class=&quot;nx&quot;&gt;expect&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;component&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;find&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;ChildComponent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)).&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;toHaveLength&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

  &lt;span class=&quot;nx&quot;&gt;component&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;find&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;button&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;simulate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;click&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

  &lt;span class=&quot;nx&quot;&gt;expect&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;component&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;find&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;ChildComponent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)).&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;toHaveLength&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;The last example perfectly illustrates how you can test components from a user point of view and still use shallow rendering.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;If your component passes a certain value to a child component, it’s okay to test for that:&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-jsx&quot; data-lang=&quot;jsx&quot;&gt;&lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;MyComponent&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;cost&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;accepted&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;setAccepted&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;useState&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;&amp;lt;&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;button&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;onClick=&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;setAccepted&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt;Accept&lt;span class=&quot;p&quot;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;button&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;ChildComponent&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;accepted=&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;accepted&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;/&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;&amp;lt;/&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;

&lt;span class=&quot;nx&quot;&gt;it&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;Passes `accepted` to `ChildComponent` on pressing the button&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;component&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;shallow&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&amp;lt;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;MyComponent&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;/&amp;gt;);&lt;/span&gt;

  &lt;span class=&quot;nx&quot;&gt;expect&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;component&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;find&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;ChildComponent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;prop&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;accepted&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)).&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;toBeFalse&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;

  &lt;span class=&quot;nx&quot;&gt;component&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;find&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;button&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;simulate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;click&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

  &lt;span class=&quot;nx&quot;&gt;expect&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;component&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;find&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;ChildComponent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;prop&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;accepted&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)).&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;toBeTrue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h1 id=&quot;dont-forget-about-end-to-end-tests&quot;&gt;Don’t forget about end-to-end tests&lt;/h1&gt;

&lt;p&gt;Finally, if you really want to test from a user’s standpoint, then make sure that you have a few end-to-tests. They could be time consuming to write and run. But at they can tests the whole system end-to-end including the backend.&lt;/p&gt;

&lt;h1 id=&quot;conclusion&quot;&gt;Conclusion&lt;/h1&gt;
&lt;ul&gt;
  &lt;li&gt;Now you can use shallow rendering and &lt;code&gt;enzyme&lt;/code&gt; for testing React components with hooks
    &lt;ul&gt;
      &lt;li&gt;Check &lt;a href=&quot;https://github.com/mikeborozdin/jest-react-hooks-shallow&quot;&gt;jest-react-hooks-shallow&lt;/a&gt; for that&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Shallow rendering has a number of advantages&lt;/li&gt;
  &lt;li&gt;It does not force you to write bad tests&lt;/li&gt;
  &lt;li&gt;You can test from a user’s point of view with shallow rendering&lt;/li&gt;
  &lt;li&gt;Don’t forget about end-to-end testing&lt;/li&gt;
&lt;/ul&gt;
</description>
        <pubDate>Sun, 15 Mar 2020 00:00:00 +0000</pubDate>
        <link>https://mikeborozdin.com/post/test-react-hooks-with-shallow</link>
        <guid isPermaLink="true">https://mikeborozdin.com/post/test-react-hooks-with-shallow</guid>
        
        
      </item>
    
      <item>
        <title>Gradual move to TypeScript. Running JavaScript and TypeScript side-by-side</title>
        <description>&lt;p&gt;TypeScript has a lot of advantages. However, it’s not often that you are starting a brand new project. More often though you are working on an existing codebase and simply don’t have luxury of rewriting everything from scratch. After all, we need to deliver new features and fix annoying bugs. &lt;/p&gt;

&lt;p&gt;But we shouldn’t despair - it’s possible to gradually move your projects to TypeScript - one module at a time - and run TypeScript and JavaScript side-by-side.&lt;/p&gt;

&lt;!-- more --&gt;

&lt;h1 id=&quot;example-project&quot;&gt;Example Project&lt;/h1&gt;

&lt;p&gt;As an example we’ll use a simple React &amp;amp; Webpack project. Initially, it’ll look like the left-hand side of the diagram - just two modules (&lt;code&gt;App&lt;/code&gt; and &lt;code&gt;JsComponent&lt;/code&gt;). And gradually we’ll move onto the right-hand side the picture where we’ll have JavaScript and TypeScript components side-by-side.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/2019-11-02-typescript/modules.png&quot; alt=&quot;modules architecture&quot; class=&quot;center-image&quot; /&gt;&lt;/p&gt;

&lt;h1 id=&quot;gradual-migration-to-typescript&quot;&gt;Gradual Migration to TypeScript&lt;/h1&gt;
&lt;p&gt;And in order to keep those languages side-by side, we need to make sure that we can:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Import TypeScript modules from JavaScript ones&lt;/li&gt;
  &lt;li&gt;Import JavaScript modules into TypeScript code&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;If we can do that, we’ll be able to move a project to TypeScript while working on features and bug fixes. &lt;/p&gt;

&lt;p&gt;For example, if you have to add a new React component, you can write it straight in TypeScript. And you’ll still be able to use inside other components written in JavaScript.&lt;/p&gt;

&lt;h1 id=&quot;initial-webpack-setup&quot;&gt;Initial Webpack setup&lt;/h1&gt;

&lt;p&gt;Since we use Webpack as a module bundler, I want to show its configuration for the pure JavaScript project. That will allow us to see what we started with and what we’ve added to enable the TypeScript support.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;webpack.config.js&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;HtmlWebPackPlugin&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;html-webpack-plugin&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;path&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

&lt;span class=&quot;nx&quot;&gt;module&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;exports&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;env&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;({&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;entry&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;index&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;./src/index.jsx&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;output&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;resolve&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;./dist/&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;devtool&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;env&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;production&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;false&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;source-map&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;module&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;rules&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;enforce&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;pre&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;test&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;sr&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\.&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;js$/&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;loader&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;source-map-loader&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;test&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;sr&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\.(&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;js|jsx&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;$/&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;exclude&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;sr&quot;&gt;/node_modules/&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;use&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
          &lt;span class=&quot;na&quot;&gt;loader&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;babel-loader&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;test&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;sr&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\.(&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;ts|tsx&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;$/&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;loader&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;awesome-typescript-loader&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;resolve&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;extensions&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;.js&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;.jsx&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;.ts&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;.tsx&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;plugins&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;HtmlWebPackPlugin&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;({&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;template&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;./src/index.html&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&#39;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}),&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;As you can see it’s a very simple setup. The main thing is the use of the &lt;code&gt;babel-loader&lt;/code&gt; for loading of ES modules with JSX in them.&lt;/p&gt;

&lt;h1 id=&quot;import-typescript-modules-into-javascript-ones&quot;&gt;Import TypeScript modules into JavaScript ones&lt;/h1&gt;

&lt;p&gt;Okay, we’re adding a new React component and have an opportunity to convert an existing one into TypeScript. This is a perfect example of importing TypeScript modules into JavaScript ones.&lt;/p&gt;

&lt;p&gt;Let’s start doing this by adding TypeScript and types for React to our project:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;npm &lt;span class=&quot;nb&quot;&gt;install&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--save-dev&lt;/span&gt; typescript @types/react&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Next step would be to &lt;code&gt;tsconfig.json&lt;/code&gt; to the root folder of the project to configure the TypeScript compiler. The important parts of the configuration are:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;code&gt;esModuleInterop: true&lt;/code&gt; - we won’t be able to import the React module without it&lt;/li&gt;
  &lt;li&gt;&lt;code&gt;sourceMap: true&lt;/code&gt; - enables source map for debugging&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;tsconfig.json&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-json&quot; data-lang=&quot;json&quot;&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;compilerOptions&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;outDir&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;./dist/&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;sourceMap&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;noImplicitAny&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;module&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;commonjs&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;target&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;es6&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;jsx&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;react&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;esModuleInterop&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;strictNullChecks&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;include&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;./src/**/*&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;rules&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;quotemark&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;single&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;After this we can write our TypeScript component&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;src/js-component/ts-component/ts-component.tsx&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;import React from &lt;span class=&quot;s1&quot;&gt;&#39;react&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

interface Props &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
  myProp: number&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

const TsComponent: React.FC&amp;lt;Props&amp;gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;({&lt;/span&gt; myProp &lt;span class=&quot;o&quot;&gt;})&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;
  &amp;lt;div&amp;gt;
    Hi, I am a TypeScript component and I accept a number prop which is &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;myProp&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
  &amp;lt;/div&amp;gt;
&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;default TsComponent&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Now, if we try to import it from a JavaScript component:&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;src/js-component/js-component.tsx&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;import React from &lt;span class=&quot;s1&quot;&gt;&#39;react&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
import TsComponent from &lt;span class=&quot;s1&quot;&gt;&#39;./ts-component/ts-component&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

const JsComponent &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;
  &amp;lt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;
    &amp;lt;div&amp;gt;Hi, I am a JavaScript component and I am calling a TypeScript component&amp;lt;/div&amp;gt;
    &amp;lt;TsComponent &lt;span class=&quot;nv&quot;&gt;myProp&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;={&lt;/span&gt;123&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; /&amp;gt;
  &amp;lt;/&amp;gt;
&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;default JsComponent&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;We’ll get an error that Webpack is unable to resolve module &lt;code&gt;ts-component/ts-component&lt;/code&gt;. Indeed, if we look at our Webpack configuration above, we’ll see that we only instruct it to resolve &lt;code&gt;.js&lt;/code&gt; and &lt;code&gt;*.jsx&lt;/code&gt; files. Adding the &lt;code&gt;.tsx&lt;/code&gt; to that list will not solve the problem - the &lt;code&gt;babel-loader&lt;/code&gt; won’t be able to parse the TypeScript syntax.&lt;/p&gt;

&lt;p&gt;Luckily, we can solve this problem by adding the &lt;a href=&quot;https://www.npmjs.com/package/awesome-typescript-loader/&quot;&gt;awesome-typescript-loader&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;So we just type &lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;npm &lt;span class=&quot;nb&quot;&gt;install&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--save-dev&lt;/span&gt; awesome-typescript-loader&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;in the terminal and add the following configuration to &lt;code&gt;webpack.config.js&lt;/code&gt;:&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;webpack.config.js&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;module: &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    rules: &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;
    // existing rules...

    // new TypeScript configuration
    &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;test&lt;/span&gt;: /&lt;span class=&quot;se&quot;&gt;\.&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;ts|tsx&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$/&lt;/span&gt;, loader: &lt;span class=&quot;s1&quot;&gt;&#39;awesome-typescript-loader&#39;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;,
    &lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;,
  resolve: &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    // we also need to add &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;.tsx here
    extensions: &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&#39;.js&#39;&lt;/span&gt;, &lt;span class=&quot;s1&quot;&gt;&#39;.jsx&#39;&lt;/span&gt;, &lt;span class=&quot;s1&quot;&gt;&#39;.ts&#39;&lt;/span&gt;, &lt;span class=&quot;s1&quot;&gt;&#39;.tsx&#39;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;,
  &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Now, if we run the code - it’ll work flawlessly!&lt;/p&gt;

&lt;p&gt;Congratulations! We’ve added our first TypeScript module into an existing JavaScript project! And more importantly, it didn’t require a rewrite of the whole project.&lt;/p&gt;

&lt;h1 id=&quot;how-did-that-work&quot;&gt;How did that work?&lt;/h1&gt;
&lt;p&gt;You may wonder how we’ve managed to import a module written in one language into another? Especially, given that language - TypeScript - has more features than the language we’ve imported it into - JavaScript.&lt;/p&gt;

&lt;p&gt;That was possible thanks to Webpack loaders that transform an imported module on the fly into JavaScript. You can read more about them &lt;a href=&quot;https://webpack.js.org/concepts/loaders/&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;But do you have to use Webpack? No! You can use whatever module bundler including Browserify. The main thing is to be enable transformation of imported modules on the fly into JavaScript.&lt;/p&gt;

&lt;h1 id=&quot;what-about-debugging&quot;&gt;What about debugging?&lt;/h1&gt;
&lt;p&gt;Can you still you the Chrome Debugger? Yes, you still can! First of all, the &lt;code&gt;tsconfig.json&lt;/code&gt; we’ve created instructs the TypeScript compilier to produce source maps. Then the initial &lt;code&gt;webpack.config.js&lt;/code&gt; already included source maps. In the Chrome Debugger you step straight into TypeScript code!&lt;/p&gt;

&lt;h1 id=&quot;importing-a-javascript-module-into-typescript&quot;&gt;Importing a JavaScript Module into TypeScript&lt;/h1&gt;

&lt;p&gt;Let’s have a look at the opposite example - importing a JavaScript module into TypeScript. In this case, I’m talking about importing an own module, as opposed to a 3rd party library, but some of the techniques are the same.&lt;/p&gt;

&lt;p&gt;Also, if we’re talking about importing an own JavaScript module into TypeScript, why would you do that in the first place? Well, if you have a large JavaScript codebase and you’re working on a TypeScript module you may want to re-use your existing work in JavaScript without rewriting it in TypeScript.&lt;/p&gt;

&lt;p&gt;Let’s add a simple JavaScript component:&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;src/ts-component/another-js-component/another-js-component.jsx&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;import React from &lt;span class=&quot;s1&quot;&gt;&#39;react&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
import PropTypes from &lt;span class=&quot;s1&quot;&gt;&#39;prop-types&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

const AnotherJsComponent &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;({&lt;/span&gt; a, b &lt;span class=&quot;o&quot;&gt;})&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;
  &amp;lt;div&amp;gt;
    Hi, I am another JavaScript components. And these are my properties:
    a: &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;a&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &amp;amp; b: &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;b&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
  &amp;lt;/div&amp;gt;
&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

AnotherJsComponent.propTypes &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
  a: PropTypes.number.isRequired,
  b: PropTypes.string.isRequired
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;default AnotherJsComponent&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;And we can simply import it into our TypeScript component: &lt;/p&gt;

&lt;p&gt;&lt;strong&gt;src/ts-component/ts-component.tsx&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;import React from &lt;span class=&quot;s1&quot;&gt;&#39;react&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
import AnotherJsComponent from &lt;span class=&quot;s1&quot;&gt;&#39;./another-js-component/another-js-component&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

interface Props &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
  myProp: number&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

const TsComponent: React.FC&amp;lt;Props&amp;gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;({&lt;/span&gt; myProp &lt;span class=&quot;o&quot;&gt;})&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;
  &amp;lt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;
    &amp;lt;div&amp;gt;
      Hi, I amm a TypeScript component and I accept a number prop which is &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;myProp&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
    &amp;lt;/div&amp;gt;
    &amp;lt;AnotherJsComponent &lt;span class=&quot;nv&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;={&lt;/span&gt;1&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&#39;foo&#39;&lt;/span&gt; /&amp;gt;
  &amp;lt;/&amp;gt;
&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;default TsComponent&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;It’s all nice and easy, we don’t need to change anything in the Webpack configuration. We can simply import JavaScript modules into the TypeScript code.&lt;/p&gt;

&lt;p&gt;But are we missing anything? &lt;/p&gt;

&lt;p&gt;Yes, we do miss type-safety! We don’t know the types of the component properties we need to pass. &lt;/p&gt;

&lt;p&gt;Is there a way to solve it without having to re-write &lt;code&gt;AnotherJsComponent&lt;/code&gt; in TypeScript? Yes, we can provide our own type definitions while leaving the implementation of the JavaScript module intact. &lt;/p&gt;

&lt;p&gt;That’s exactly the approach that is used when dealing with 3rd party libraries - they either come with their own type definition files or we install them separately. In fact, we’ve already done that for React when we called &lt;code&gt;npm install --save-dev @types/react&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;What do we need to do to create our own type definition? &lt;/p&gt;

&lt;p&gt;First, we need to create a file in the same folder as the imported module - &lt;code&gt;another-js-component.d.ts&lt;/code&gt; and place the following contents there:&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;src/ts-component/another-js-component/another-js-component.d.ts&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;import React from &lt;span class=&quot;s1&quot;&gt;&#39;react&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

interface Props &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
  a: number&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  b: string&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;nb&quot;&gt;declare &lt;/span&gt;const AnotherJsComponent: React.FC&amp;lt;Props&amp;gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;default AnotherJsComponent&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h1 id=&quot;dont-start-with-renaming-js-files-into-ts&quot;&gt;Don’t Start with Renaming &lt;code&gt;.js&lt;/code&gt; files into &lt;code&gt;.ts&lt;/code&gt;&lt;/h1&gt;
&lt;p&gt;Some migration guides recommend you to start with renaming your &lt;code&gt;.js&lt;/code&gt; files into &lt;code&gt;.ts&lt;/code&gt;. That may sound reasonable, after all isn’t TypeScript a superset of JavaScript? And should not existing JavaScript code be valid TypeScript code, as well?&lt;/p&gt;

&lt;p&gt;Well, not so fast. Imagine, you have the following module:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;add&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;default&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;If we just change the file extention to &lt;code&gt;.ts&lt;/code&gt;, we will get a TypeScript error. It will tell us that the input arguments &lt;code&gt;a&lt;/code&gt; and &lt;code&gt;b&lt;/code&gt; has an implicit type of &lt;code&gt;any&lt;/code&gt;. And that will be completely reasonable. After all, it’s the main purpose of TypeScript to provide static typing. &lt;/p&gt;

&lt;p&gt;Now imagine if you’re doing it on the whole codebase - it’ll be full of TypeScript errors. Of course, you can set &lt;code&gt;&quot;noImplicitAny&quot;: false&lt;/code&gt; in your &lt;code&gt;tsconfig.json&lt;/code&gt;. But that will not help you to prevent errors in legit TypeScript files.&lt;/p&gt;

&lt;h1 id=&quot;code&quot;&gt;Code&lt;/h1&gt;
&lt;p&gt;All the code is available on &lt;a href=&quot;https://github.com/mikeborozdin/react-typescript-and-javascript-side-by-side&quot;&gt;GitHub&lt;/a&gt;.&lt;/p&gt;

&lt;h1 id=&quot;conclusion&quot;&gt;Conclusion&lt;/h1&gt;

&lt;ul&gt;
  &lt;li&gt;You don’t have to move your projects to TypeScript in one big bang&lt;/li&gt;
  &lt;li&gt;Instead, you can move one module at a time&lt;/li&gt;
  &lt;li&gt;It’s easy to import TypeScript code into JavaScript and vice versa&lt;/li&gt;
  &lt;li&gt;You can provide static types around JavaScript modules without having to rewrite them&lt;/li&gt;
  &lt;li&gt;Thanks to types definitions files&lt;/li&gt;
  &lt;li&gt;You also don’t have to use Webpack. All you need is to be able to transform on the fly imported TypeScript modules into JavaScript &lt;/li&gt;
&lt;/ul&gt;
</description>
        <pubDate>Sat, 02 Nov 2019 00:00:00 +0000</pubDate>
        <link>https://mikeborozdin.com/post/gradual-typescript-migration</link>
        <guid isPermaLink="true">https://mikeborozdin.com/post/gradual-typescript-migration</guid>
        
        
      </item>
    
      <item>
        <title>Testing MVP of B2C Product? You Need a Lot of Users</title>
        <description>&lt;p&gt;You have an idea for a B2C product, for a mobile app even. But you’re worried about bugs &amp;amp; bad reviews on app store. So, you only release it for a very limited audience. That’s probably wrong… &lt;!-- more --&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/product-management-in-the-open/mvp/large-vs-small.jpg&quot; alt=&quot;Small vs Large Audience&quot; class=&quot;center-image&quot; /&gt; &lt;/p&gt;

&lt;h1 id=&quot;executive-summary&quot;&gt;Executive Summary&lt;/h1&gt;
&lt;ul&gt;
  &lt;li&gt;B2C (business-to-consumer) products may require a large test audience to validate your idea
    &lt;ul&gt;
      &lt;li&gt;Well, at least a few hundred users&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Test audience should be large enough to meet your KPIs
    &lt;ul&gt;
      &lt;li&gt;Is it even mathematically possible to target 20% retention rate, if you audience is limited to 20 users?&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Don’t fear bad reviews for a mobile app
    &lt;ul&gt;
      &lt;li&gt;You need a huge number of installs to get any reviews&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;This article is part of the &lt;a href=&quot;../&quot;&gt;Product Management in the Open Series&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;intro&quot;&gt;Intro&lt;/h1&gt;
&lt;p&gt;As I described previously I came up with &lt;a href=&quot;../idea&quot;&gt;an idea&lt;/a&gt;, &lt;a href=&quot;../value-hypothesis-and-kpis&quot;&gt;a value hypothesis, KPIs&lt;/a&gt;. Now it was time to confirm or discard that hypothesis. There are numerous ways of doing that, but I opted out for a mobile app as an MVP. That would be something tangible users could play with, while I would be gathering data on their usage.&lt;/p&gt;

&lt;p&gt;However, mobile app development has certain barriers to entry. Unlike a website which you can just launch and make available to the whole world, a mobile app has to go through an approval process before it appears on an app store. All that sounded daunting when I quickly wanted to validate my idea. I was also worried about negative reviews because of bugs or less than ideal user experience. After all, mobile users are a few taps away from giving your app a 1 star rating. And that could really kill an early app idea, if people immediately see poor reviews. Or… so I thought at that time.&lt;/p&gt;

&lt;p&gt;Luckily, I had a dozen of friends who were were also into food &amp;amp; drinks (my target group). So I had an audience I could test my app with. &lt;/p&gt;

&lt;p&gt;As a result, I embarked on scoping features, content, platform and building an actual MVP (I’ll talk about it in a upcoming blog post). I also figured out a way to have a private distribution for both iOS and Android. (Unfortunately, my friends didn’t use a single platform, so I had to target both of them).
Anyway, after some time, I had an MVP for my limited audience. &lt;/p&gt;

&lt;h1 id=&quot;field-testing&quot;&gt;Field Testing&lt;/h1&gt;
&lt;p&gt;And I even organised a field testing session among a group of foodies. We spent a night wandering around town in search of the best wine and craft beer thanks to Best in Town.&lt;/p&gt;

&lt;table&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;img src=&quot;/images/product-management-in-the-open/mvp/happy-users.jpg&quot; alt=&quot;Happy users&quot; /&gt;&lt;/td&gt;
      &lt;td&gt;&lt;img src=&quot;/images/product-management-in-the-open/mvp/phones.jpg&quot; alt=&quot;And their phones... and beer&quot; /&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Happy users&lt;/td&gt;
      &lt;td&gt;And their phones… and beer&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;The idea and the app got a positive reception and it was great to observe people using your app.&lt;/p&gt;

&lt;p&gt;I even got a few e-mails after from a few friends of friends. They gave me detailed feedback on the app and some new ideas.&lt;/p&gt;

&lt;h1 id=&quot;but-do-you-get-enough-data-to-validate-hypothesis&quot;&gt;But Do You Get Enough Data to Validate Hypothesis?&lt;/h1&gt;
&lt;p&gt;But as the time went on my analytics system (Google Analytics at the time) registered very little activity. At that time I managed to sign up around 20+ users to the app. And if we look at &lt;a href=&quot;../value-hypothesis-and-kpis&quot;&gt;the KPI we have set for validating the hypothesis it was a Monthly Retention&lt;/a&gt;. The hypothesis would be validated, if we achieved a 20% monthly retention rate.&lt;/p&gt;

&lt;p&gt;Okay, so we had around 20 people and 20% of them would be what 4 persons? That hardly looks good from the point of view of statistical significance.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Your test audience should be large enough to make your KPIs statistically significant.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h1 id=&quot;issues-with-releasing-b2c-mobile-apps-to-small-audience&quot;&gt;Issues with Releasing B2C Mobile Apps to Small Audience&lt;/h1&gt;

&lt;p&gt;So this leads to the following points when it comes to releasing an B2C product to really small audiences. By the way, you may still have a limited launch - think of when Gmail was by invitation only. But probably, they released it to more than 20 people.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;You won’t get enough quantitative data to validate your hypothesis.&lt;/strong&gt; B2C (business-to-consumer) apps require scale. As we said before, the average monthly retention is about 20-35%. Even if your app in its first iteration does produce the 20% monthly retention you’ll need a few hundred users to ensure the number is significant enough. It is also highly likely that you may need a few iterations before your app hits any reasonable retention rates. And that requires a constant stream of users coming to the app. Think about if your first monthly retention rate is 10%, you’ll lose 90% of your audience. And for your next experiment you’ll have to acquire a new user base.&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;You accidentally exclude one of your target audiences.&lt;/strong&gt; In &lt;a href=&quot;../idea#product-vision-board&quot;&gt;the Product Canvas&lt;/a&gt; I set that we had two target audiences - locals and tourists. But by releasing an app to my friends, I totally excluded the tourists group out of my tests.&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Friend bias.&lt;/strong&gt; If you release an app to friends and friends of friends then you may get positive feedback at first. And people will be generally impressed with your work. But that does not mean they will use your app in the future or they have the problem you’re trying to solve. And yeah, if you have a small audience you shouldn’t get too excited about sudden upticks you spot in your analytics system. It could be that your friends are just talking about you and showing your app to your other mates. And… your other mates won’t be able to get an app, because it’s not an an app store.&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;You also limit your chances to present an app to random people.&lt;/strong&gt; In case, of Best in Town, it was difficult to sign up random people. I would often talk to people recently opened their own cafe. I could’ve shown them Best in Town, but it would be a painful process of getting them onto the app during to the limitation of restricted audiences on iOS &amp;amp; Android.&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;qualitative-analysis-is-still-possible-after-general-release&quot;&gt;Qualitative Analysis is Still Possible After General Release&lt;/h1&gt;
&lt;p&gt;Some people may say ‘But what about the benefits of qualitative analysis’? It is useful indeed, but releasing an app for a general audience, does not exclude qualitative analysis.&lt;/p&gt;

&lt;p&gt;I launched the app among the people I knew. We also did field testing together. Of course, it gave me lots of insightful information. I concur it was great to see how people were using the app. That really helped to spot various usability issues.&lt;/p&gt;

&lt;p&gt;However, releasing an app to everyone does not exclude qualitative analysis. You can still have sessions in person with users to see how they use an app, while at the same time you gather quantitative data from all other users you acquired through app stores. &lt;/p&gt;

&lt;h1 id=&quot;false-fear-of-bad-reviews&quot;&gt;False Fear of Bad Reviews&lt;/h1&gt;
&lt;p&gt;Jumping a bit forward the app is now on the market - both on Apple App Store and Google Play Store. There are close to 1,000 downloads in total. And there haven’t been any rating below 4 stars. There is &lt;a href=&quot;https://www.quora.com/Whats-the-approximate-ratio-of-downloads-to-total-number-of-ratings-for-iPhone-apps&quot;&gt;the data that suggests&lt;/a&gt; that a ratio of rating per download can vary from 1 to 75 to 1 to 600 (1 rating per 600 downloads. &lt;/p&gt;

&lt;p&gt;So, clearly there was nothing to fear.&lt;/p&gt;

&lt;h1 id=&quot;going-forward&quot;&gt;Going Forward&lt;/h1&gt;
&lt;p&gt;It’s not enough to have 20 installs if you are working on a mass market B2C app. So, I decided to release the app on app stores and spent money on advertising to acquire users. I’ll talk about that in the future posts.&lt;/p&gt;
</description>
        <pubDate>Tue, 30 Oct 2018 00:00:00 +0000</pubDate>
        <link>https://mikeborozdin.com/product-management-in-the-open/testing-mvp-of-b2bc-product-you-need-a-lot-of-users</link>
        <guid isPermaLink="true">https://mikeborozdin.com/product-management-in-the-open/testing-mvp-of-b2bc-product-you-need-a-lot-of-users</guid>
        
        
      </item>
    
      <item>
        <title>Value Hypothesis and KPIs</title>
        <description>&lt;p&gt;This post talks about setting a value hypothesis and related KPIs. It’s part of &lt;a href=&quot;/product-management-in-the-open&quot;&gt;the ‘Product Management in the Open’ series&lt;/a&gt;. The goal of the series is describe the process of product managing a mobile app - Best in Town / Best in Edinburgh. Please, &lt;a href=&quot;/product-management-in-the-open/idea&quot;&gt;check this page to read more about the app itself&lt;/a&gt;. &lt;/p&gt;

&lt;p&gt;This post describes my thinking back in the beginning of 2017. Not everything I did at that time was correct and I also try to reflect on some of the mistakes here.&lt;!-- more --&gt;&lt;/p&gt;

&lt;h1 id=&quot;value-hypothesis&quot;&gt;Value Hypothesis&lt;/h1&gt;
&lt;p&gt;Okay, so we’ve got a product idea. But how do we know if it’s a good idea?&lt;/p&gt;

&lt;p&gt;Actually, what we’ve got is called a &lt;em&gt;value hypothesis&lt;/em&gt; in the Lean Startup terminology. We just have a hypothesis that people will like the idea of an app that rates meals &amp;amp; drinks as opposed to entire venues.&lt;/p&gt;

&lt;h1 id=&quot;build-measure-learn-loop&quot;&gt;Build-Measure-Learn Loop&lt;/h1&gt;

&lt;p&gt;Any hypothesis has to be validated. That takes to another concept from the Lean Startup - ‘&lt;em&gt;Build-Measure-Learn&lt;/em&gt;’ loop.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/product-management-in-the-open/value-hypothesis/build-measure-learn.jpg&quot; alt=&quot;Build-Measure-Learn Loop&quot; class=&quot;center-image&quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;We come up with an idea&lt;/li&gt;
  &lt;li&gt;We define a hypothesis to validate it&lt;/li&gt;
  &lt;li&gt;We identify the KPIs that allow us to test the hypothesis&lt;/li&gt;
  &lt;li&gt;We build a very minimal product to validate it&lt;/li&gt;
  &lt;li&gt;And finally we can either confirm or deny our hypothesis
    &lt;ul&gt;
      &lt;li&gt;Next blog posts though will tell that the process of validating a hypothesis is not as straightforward as it sounds here&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;critical-action&quot;&gt;Critical Action&lt;/h1&gt;

&lt;p&gt;So our hypothesis is that people will use Best in Town. Or in other words, they will use a mobile app that shows rates meals &amp;amp; drinks, instead of entire places. &lt;/p&gt;

&lt;p&gt;But what does it really mean ‘to use a product’? Does it mean that people download it? Open it? Or do something else?&lt;/p&gt;

&lt;p&gt;As we said before, users must get a value out of the product. And that means more than just installing an app or launching it. It means performing &lt;em&gt;a critical action&lt;/em&gt;.&lt;/p&gt;

&lt;p&gt;A classic example of a critical action is playing a song in a music player app. Indeed, if people open the music player app, but don’t play a song, it means they don’t get a value out of it. Of course, there could be a case when the value users get is different from what the creators perceived. For example, people use the music player app to read lyrics instead of playing songs. And if we can spot that trend, we can change our app, so that it focuses on songs lyrics. Such a change in direction is called &lt;em&gt;pivoting&lt;/em&gt;.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;When it comes to Best in Edinburgh, &lt;em&gt;the critical action is looking at the place&lt;/em&gt;. In other words, someone has chosen a category, for example, ‘Best wine’ and opened any place on the map. That shows that they are looking at the best places to go.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;could-there-be-another-critical-action&quot;&gt;Could There Be Another Critical Action?&lt;/h2&gt;
&lt;p&gt;If we define a critical action as an the main action that gives a value, then we can take it even further. We can say that a critical action is an act of physically getting to a place after looking it up on Best in Town. &lt;/p&gt;

&lt;p&gt;That would be the best indicator if people are finding the app valuable. However, it will be quite challenging to measure that in the context of a Minimum Viable Product (MVP).&lt;/p&gt;

&lt;h1 id=&quot;kpi---retention&quot;&gt;KPI - Retention&lt;/h1&gt;
&lt;p&gt;So, we’ve established the critical action - opening a place. But is it enough to measure? Let’s say all, people who’ve downloaded the app, opened the place - would it tell us that users find it useful? What if they only do it once? What if people only use the app once after installing it? Then, perhaps they don’t find the app that useful, after all.&lt;/p&gt;

&lt;h2 id=&quot;engagement-apps-vs-transactional-ones&quot;&gt;Engagement Apps vs Transactional Ones&lt;/h2&gt;
&lt;p&gt;To be completely fair, the last statement could be debated. In theory, there can be an app that solves a user’s needs once and for all. In that case, it’ll be unwise to expect people to come back to the same app again.&lt;/p&gt;

&lt;p&gt;Also, there can be products that are transactional in nature - people use them to buy something or order a taxi. Of course, a good retention would be absolutely invaluable for that kind of apps, too. But it may not be the top KPI for them. Instead, a better KPI could be a percentage of people who complete a transaction versus just browsing. &lt;/p&gt;

&lt;p&gt;I believe Best in Edinburgh / Best in Town falls into a different category of apps - ‘engagement apps’ (for the lack of a better word). They meant to be constantly provider a value to a user, albeit not necessarily on daily basis. &lt;/p&gt;

&lt;h2 id=&quot;different-kinds-of-retention-and-usage-patterns&quot;&gt;Different Kinds of Retention and Usage Patterns&lt;/h2&gt;
&lt;p&gt;So, what we are looking for is recurring users who keep coming back. We’re looking for user retention. And when it comes to retention there are three different types of it - Daily, Weekly, and Monthly.&lt;/p&gt;

&lt;p&gt;In order to choose a retention type we need to understand the usage patterns of the app. It might be tempting to think that people will use your app every day. But that’s very often not the case. There are successful apps that have good retention apps but not used daily. And if the app is not meant for an everyday use, then there’s not much point of looking at daily retention rate. Monthly retention may show a more accurate picture.&lt;/p&gt;

&lt;p&gt;Best in Edinburgh fails into that category. It’s not going to be used daily by the same people. There’s  &lt;a href=&quot;https://www.quantcast.com/measure/yelp.com#/engagementCard&quot;&gt;a research by QuantCast about Yelp&lt;/a&gt; (a similar app/website) that shows that only 25% of users come to it more than once a month. &lt;/p&gt;

&lt;p&gt;Plus, there’s also an anecdotal evidence about myself and my friends. We do use Yelp/TripAdvisor/Google Maps for finding new places, but we don’t do it daily.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;So, monthly retention is our KPI&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;setting-kpi-retention-goals&quot;&gt;Setting KPI (Retention) Goals&lt;/h2&gt;
&lt;p&gt;But which retention are we looking to get - 100%, 50%, 25%? &lt;/p&gt;

&lt;p&gt;At the time when I was setting that goal - early 2016 - I did research on the average monthly retention rate for mobile apps. And I discovered the following.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://info.localytics.com/blog/mobile-apps-whats-a-good-retention-rate&quot;&gt;The Localytics report&lt;/a&gt; that said only 36% people, who downloaded an app, used it a month later. Please, note that if you open that report now, it’ll show higher retention figures that at that time when I was doing this research. Luckily, I copied this chart back then.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/product-management-in-the-open/value-hypothesis/localytics-retention-2016.jpg&quot; alt=&quot;Localytics Report&quot; class=&quot;center-image&quot; /&gt;&lt;/p&gt;

&lt;p&gt;I also discovered &lt;a href=&quot;https://andrewchen.co/new-data-shows-why-losing-80-of-your-mobile-users-is-normal-and-that-the-best-apps-do-much-better/&quot;&gt;a seminal post by Andrew Chen - ‘New data shows losing 80% of mobile users is normal, and why the best apps do better’&lt;/a&gt; where he quotes figures that says that on average only 10% of users are still with an app 30 days later. That data is better for top 100 apps - 25%.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;So based on that, we’ll set out goal to have M1 retention rate of 20%&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h1 id=&quot;conclusion-and-next-steps-taken-in-early-2017&quot;&gt;Conclusion and Next Steps (taken in Early 2017)&lt;/h1&gt;
&lt;p&gt;So, based on the following research and thoughts we conclude the following.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Hypothesis:&lt;/strong&gt; People like the idea behind Best in Town / Best in Edinburgh&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Hypothesis validation:&lt;/strong&gt; 20% of people who installed an app will come back to perform a critical action a month later&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Critical action:&lt;/strong&gt; opening a place&lt;/p&gt;

&lt;h2 id=&quot;next-steps&quot;&gt;Next Steps&lt;/h2&gt;

&lt;p&gt;We’ve determined our hypothesis and how we’re going to measure it. So, the next step would be to build an MVP, as minimal as possible, and get it to users.&lt;/p&gt;

&lt;p&gt;I’ll describe what will be included in the MVP in the next blog posts, which are coming out soon.&lt;/p&gt;

&lt;h1 id=&quot;reflections-and-possible-mistakes&quot;&gt;Reflections and Possible Mistakes&lt;/h1&gt;
&lt;p&gt;Writing this in Autumn 2018 I can spot the mistake I made when I setting the goals.&lt;/p&gt;

&lt;p&gt;If you look at &lt;a href=&quot;../idea#product-vision-board&quot;&gt;the Product Vision Board&lt;/a&gt;, you’ll see that the app serves two categories of users - Edinburgh locals and visitors. However, when I set the KPI to monthly retention I ignored the visitors group. If we have tourists and business visitors using the app, chances are they won’t come back to the app a month later, because they won’t be in Edinburgh. As a result, we won’t learn from them and they will even negatively skew the statistics.&lt;/p&gt;

&lt;p&gt;Looking back, that’s one of the mistakes I’ve made. I didn’t know who my target audience would be. I catered for two - local population and visitors. But the KPIs were targeted only to the local population.&lt;/p&gt;

&lt;h1 id=&quot;additional-resources&quot;&gt;Additional Resources&lt;/h1&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://info.localytics.com/blog/mobile-apps-whats-a-good-retention-rate&quot;&gt;Mobile Apps: What’s A Good Retention Rate?&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://andrewchen.co/new-data-shows-why-losing-80-of-your-mobile-users-is-normal-and-that-the-best-apps-do-much-better/&quot;&gt;New data shows losing 80% of mobile users is normal, and why the best apps do better&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://clevertap.com/blog/aarrr-metrics-vs-rarra-framework/&quot;&gt;AARRR vs. RARRA: Which is Better? - great post why it’s more important to focus on retention, as opposed to acquisition&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://medium.com/product-breakdown/product-management-analytics-what-metrics-should-you-be-measuring-241609b1950d&quot;&gt;Product Management &amp;amp; Analytics: what metrics should you be measuring?&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;This post introduces a concept of engagement and transactional apps&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;
</description>
        <pubDate>Tue, 16 Oct 2018 00:00:00 +0000</pubDate>
        <link>https://mikeborozdin.com/product-management-in-the-open/value-hypothesis-and-kpis</link>
        <guid isPermaLink="true">https://mikeborozdin.com/product-management-in-the-open/value-hypothesis-and-kpis</guid>
        
        
      </item>
    
      <item>
        <title>Idea</title>
        <description>&lt;h1 id=&quot;elevator-pitch&quot;&gt;Elevator Pitch&lt;/h1&gt;

&lt;p&gt;A mobile app that helps to find places that do you favourite meal or drink the best. Unlike existing products (Google Maps, TripAdvisor, Yelp), you see ratings for meals &amp;amp; drinks, as opposed to the whole place.&lt;!-- more --&gt;&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Choose what you’re interested in&lt;/th&gt;
      &lt;th&gt;See places with ratings around you&lt;/th&gt;
      &lt;th&gt;Get more info about place&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;img src=&quot;/images/product-management-in-the-open/idea/choose-category.png&quot; alt=&quot;Mockup&quot; /&gt;&lt;/td&gt;
      &lt;td&gt;&lt;img src=&quot;/images/product-management-in-the-open/idea/ratings-on-map.png&quot; alt=&quot;Mockup&quot; /&gt;&lt;/td&gt;
      &lt;td&gt;&lt;img src=&quot;/images/product-management-in-the-open/idea/place.png&quot; alt=&quot;Mockup&quot; /&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h1 id=&quot;product-vision-board&quot;&gt;Product Vision Board&lt;/h1&gt;

&lt;p&gt;Additionally, I’ve created a Product Canvas that helps to define various aspects about the products - target groups, needs, etc. That’s based on &lt;a href=&quot;https://www.romanpichler.com/blog/the-product-canvas/&quot;&gt;the blog post by Roman Pichler&lt;/a&gt;.&lt;/p&gt;

&lt;table&gt;
  &lt;tr&gt;
    &lt;td&gt;
      &lt;strong&gt;Vision&lt;/strong&gt;
    &lt;/td&gt;
    &lt;td colspan=&quot;3&quot;&gt;
      Help to find best things in town (brownies, coffee, wine, dry cleaners)
    &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td&gt;
      &lt;strong&gt;Target Groups:&lt;/strong&gt;
      &lt;ul&gt;
        &lt;li&gt;Visitors who come into town and search for the best wine&lt;/li&gt;
        &lt;li&gt;People about town who always want to know where the best coffee is&lt;/li&gt;
      &lt;/ul&gt;
    &lt;/td&gt;
    &lt;td&gt;
      &lt;strong&gt;Needs:&lt;/strong&gt;
      &lt;ul&gt;
        &lt;li&gt;Finding the best thing around me right now&lt;/li&gt;
        &lt;li&gt;Finding the best thing (brownie, coffee) in town&lt;/li&gt;
      &lt;/ul&gt;
    &lt;/td&gt;
    &lt;td&gt;
      &lt;strong&gt;Product&lt;/strong&gt;
      &lt;ul&gt;
        &lt;li&gt;Mobile app&lt;/li&gt;
        &lt;li&gt;Unlike other apps it allows searching places by a thing (brownie, coffee, wine)&lt;/li&gt;
        &lt;li&gt;
          When I search for ‘brownie’, I’ll see places list by the quality of brownies, 
          not by the overall quality
        &lt;/li&gt;
        &lt;li&gt;Current products (Yelp, TripAdvisor, FourSquare) only show the overall rating&lt;/li&gt;
        &lt;ul&gt;
          &lt;li&gt;But what does it mean for a cafe to be rated 4 stars?&lt;/li&gt;
          &lt;li&gt;Does it mean that it’s got a 4 star coffee? Or a brownie? Or just a cozy interior?&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/ul&gt;
    &lt;/td&gt;
    &lt;td&gt;
      &lt;strong&gt;Business Goals&lt;/strong&gt;
      &lt;ul&gt;
        &lt;li&gt;Gain Product Management experience&lt;/li&gt;
        &lt;li&gt;Generate revenue&lt;/li&gt;
        &lt;li&gt;Sold it to the current incumbents (Yelp, Google, TripAdvisor, Facebook)&lt;/li&gt;
      &lt;/ul&gt;
    &lt;/td&gt;
  &lt;/tr&gt;
&lt;/table&gt;
</description>
        <pubDate>Mon, 15 Oct 2018 00:00:00 +0000</pubDate>
        <link>https://mikeborozdin.com/product-management-in-the-open/idea</link>
        <guid isPermaLink="true">https://mikeborozdin.com/product-management-in-the-open/idea</guid>
        
        
      </item>
    
      <item>
        <title>Lean Startup and Inspiration</title>
        <description>&lt;p&gt;This is the first article in the series about working on a mobile application - Best in Town / Best in Edinburgh - and applying the Lean Startup methodology and other good product management techniques. &lt;!-- more --&gt;&lt;/p&gt;

&lt;p&gt;A few words about myself. I come from a Software Engineering background, but I’ve always had a keen interest in Product Management. I’ve had a chance to be a Product Owner on a few different projects - it was very exciting. And I learnt how to translate a product vision to a roadmap and then to an actual deliverable. However, I didn’t have a chance to do ideation, market research, set up goals and metrics, experiment, pivot, and so on. So, one of the ideas behind my endeavour is to try to do that.&lt;/p&gt;

&lt;h1 id=&quot;how-it-all-started&quot;&gt;How it all Started&lt;/h1&gt;

&lt;p&gt;I was sitting in a new cafe&lt;sup id=&quot;fnref:1&quot;&gt;&lt;a href=&quot;#fn:1&quot; class=&quot;footnote&quot;&gt;1&lt;/a&gt;&lt;/sup&gt; in a trendy part of Edinburgh, UK and reading the ‘Lean Startup’ by Eric Ries. I was enjoying the vibe in the cafe and the winter sun outside, but I wasn’t impressed with either the coffee or cakes which were on offer. The place was busy though. And TripAdvisor and Yelp both showed a relatively good rating. &lt;/p&gt;

&lt;p&gt;The last fact led me to a thought - what is a rating on TripAdvisor, Yelp, and the other usual suspects? As a rating you get a single number - 4.1 stars, but what does it really mean? Does it mean that a place has a good coffee? Or maybe the brownies there are delicious? Or could it be a nice atmosphere and staff? Or is it a combination of all those factors?&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/product-management-in-the-open/intro/single-rating.jpg&quot; alt=&quot;What is a rating?&quot; class=&quot;center-image&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Hmm… but what if you are really interested in finding places that do coffee the best? Or any other favourite thing of yours? Or say, for example, you have friends over from abroad and want to surprise them with the best craft beer in town? How do you find it?&lt;/p&gt;

&lt;p&gt;Say, you’re looking for a bar with amazing wine. You search for ‘wine’, but the existing apps will only throw at you a number of French restaurants. Granted, they would have great wine, but it’s not something you’re looking for. You just care about the quality of wine, nothing else.&lt;/p&gt;

&lt;p&gt;Enter, Best in Edinburgh (or Best in Town it was known in those days). In Best in Town you can search for specific things - wine, craft beer, coffee, and it’ll show you ratings for those things only. So, if one bar has 5 stars for wine, but only 4 for cocktails, the app will tell you about it!&lt;/p&gt;

&lt;p&gt;You can read more about &lt;a href=&quot;../idea&quot;&gt;the idea itself here&lt;/a&gt;.&lt;/p&gt;

&lt;h2 id=&quot;footnotes&quot;&gt;Footnotes&lt;/h2&gt;

&lt;div class=&quot;footnotes&quot;&gt;
  &lt;ol&gt;
    &lt;li id=&quot;fn:1&quot;&gt;
      &lt;p&gt;The cafe closed shut at some point that year. It was replaced by another one - Brill Jewellery &amp;amp; Coffee. Yes, it was a both a jewellery shop and a cafe. Nothing to be surprised about though. It was in in Stockbridge, Edinburgh - the most fashionable part of town. &lt;a href=&quot;#fnref:1&quot; class=&quot;reversefootnote&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
  &lt;/ol&gt;
&lt;/div&gt;
</description>
        <pubDate>Sun, 14 Oct 2018 00:00:00 +0000</pubDate>
        <link>https://mikeborozdin.com/product-management-in-the-open/lean-startup-and-inspiration</link>
        <guid isPermaLink="true">https://mikeborozdin.com/product-management-in-the-open/lean-startup-and-inspiration</guid>
        
        
      </item>
    
      <item>
        <title>Split User Stories Ruthlessly - And Get Value Earlier</title>
        <description>&lt;p&gt;Why do you need to split user stories?&lt;/p&gt;

&lt;p&gt;Often, you hear that it is important to split user stories. You read articles that say it should be possible to complete a user story within a single sprint, ideally within a few days. That’s entirely accurate. &lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;But the main benefit of splitting user stories is that you will deliver value faster!&lt;!-- more --&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Let’s take a look at an example. Say, we are developing a time tracking tool. Its main purpose is to analyse time spent on different projects. &lt;/p&gt;

&lt;p&gt;Let’s also assume that we already have a prioritised backlog that looks like this:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Enter timesheets&lt;/li&gt;
  &lt;li&gt;Approve timesheets&lt;/li&gt;
  &lt;li&gt;View time spent by project&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;At the first glance, the backlog looks reasonable. It appears to be prioritised and the user stories look small enough. But the devil is in the details. When you look at the the first story - &lt;code&gt;‘Enter timesheets’&lt;/code&gt;, you’ll see the following:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;As a developer
I want to be able to log time spent on projects
So that the company could analyse time spent on different projects

**Acceptance criteria**

* Users select a project and enter hours spent for each day
* Users can add more lines for other projects
	* Users can delete lines for projects
	* If a user presses [delete] on an item with hours, 
		there has to be a confirmation pop-up
* There should be an area where a user can see total time spent per day
	* We want a user to avoid making mistakes. If time soent is less or more than 
	8 hours per day it has to be coloured in red. 
	If it’s 8 hours plus/minus one hour, it should be coloured in green.
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;There’s also a mockup attached.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/2017-08-13-split-user-stories/mockup.png&quot; alt=&quot;Mockup&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Well, that’s escalated quickly! A simple story has turned out into a collection of business rules!&lt;/p&gt;

&lt;p&gt;It may seem that each rule is small enough and can be easily implemented. But don’t give in to that temptation!&lt;/p&gt;

&lt;p&gt;Each rule is small enough, but in total they all will make up to a substantial amount of time to develop. That will, in turn, require a good amount of testing, as well.&lt;/p&gt;

&lt;h1 id=&quot;think-of-product-goal&quot;&gt;Think of Product Goal&lt;/h1&gt;

&lt;p&gt;So, let’s stop and think. What’s the proposition behind your product? It is analysis of time spent on different projects. There is even a user story for that. So, why don’t we go to that user story as fast as possible?!&lt;/p&gt;

&lt;h1 id=&quot;consider-main-goal-of-user-story-split-story-to-achive-that-goal-faster&quot;&gt;Consider Main Goal of User Story. Split Story to Achive That Goal Faster&lt;/h1&gt;

&lt;p&gt;And what is the main premise of the ‘Enter timesheets’ story? Well, that’s an ability to enter timesheets! So, let’s focus on that activity and try to move other bits into separate user stories. &lt;/p&gt;

&lt;p&gt;If we look at the acceptance criteria, we’ll see that most of it is not about entering timesheets, but related functionality. For example, we want to have a variable number of activities (lines) per week. Then, we would like to see nice visual cues, if hours entered look wrong.&lt;/p&gt;

&lt;p&gt;Those are great ideas, but do they help us to achive the overacrching product goal? No. So, let’s focus on what is really important. And split the user story into:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Enter timesheets (3 activities per week)&lt;/li&gt;
  &lt;li&gt;Visual cues when the hours entered doesn’t look right&lt;/li&gt;
  &lt;li&gt;Have more than 3 activities per week&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;re-prioritise-backlog&quot;&gt;Re-prioritise Backlog&lt;/h1&gt;

&lt;p&gt;Now, we should go back to our backlog and re-prioritise it. We want to put the last two stories to the bottom of the backlog. At the end your backlog should look like:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Enter timesheets (3 activities per week)&lt;/li&gt;
  &lt;li&gt;Approve timesheets&lt;/li&gt;
  &lt;li&gt;View time spent by project&lt;/li&gt;
  &lt;li&gt;Visual cues when the hours entered doesn’t look right&lt;/li&gt;
  &lt;li&gt;Have more than 3 activities per week&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Always re-prioritise the backlog after splitting user stories. Otherwise, you would do the same things in the initial order and wouldn’t move towards your product goals fast enough.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Splitting user stories allows you to prioritise what is really important. And achieve the product goals faster. &lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;You’ll probably have to repeat this exercise for ‘Approve Timesheets’ and ‘View time spent by project’. But I guess you’ve got the idea. You’ll end up with the &lt;strong&gt;Prioritise - Split - Prioritise cycle&lt;/strong&gt;.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/2017-08-13-split-user-stories/prioritise-split-cycle.png&quot; alt=&quot;Prioritise-Split Cycle&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Another good way to look at is to revisit the famous picture of the iterative Mona Lisa (pictures below are credit of Jeff Patton - the inventor of User Story Maps) &lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Incremental Mona Lisa&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/2017-08-13-split-user-stories/incremental-mona-lisa.jpg&quot; alt=&quot;Incremental Mona Lisa&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Iterative Mona Lisa&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/2017-08-13-split-user-stories/iterative-mona-lisa.jpg&quot; alt=&quot;Iterative Mona Lisa&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Indeed, you don’t want to spend time painting the perfect top-left corner of the picture (the original ‘Enter Timesheets’ story). Instead, you want to sketch out the whole piece. That will already give users and stakeholders something to play with. Such early deliver will allow you to get feedback from users and learn from that.&lt;/p&gt;

&lt;h1 id=&quot;additional-reading&quot;&gt;Additional Reading&lt;/h1&gt;
&lt;p&gt;I’ve focused on the benefits of splitting user stories here. But if you want to know more about techniques for splitting user stories and prioritising backlogs, then I would suggest the following reading:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;http://agileforall.com/patterns-for-splitting-user-stories/&quot;&gt;Patterns for Splitting User Stories&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://jpattonassociates.com/the-new-backlog/&quot;&gt;The New User Story Backlog is a Map&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;User Story Mapping is a fantastic technique for understand how to achieve a user’s goals fast&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.impactmapping.org/delivering.html&quot;&gt;Impact Mapping&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;Impact Mapping is especially good at understand what you &lt;strong&gt;don’t need&lt;/strong&gt; to do in order to achieve your goals&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;related-posts&quot;&gt;Related posts&lt;/h1&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;/post/being-effective-tech-lead/&quot;&gt;On being effective tech lead&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/post/managing-technical-debt/&quot;&gt;Managing technical debt&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
        <pubDate>Sun, 13 Aug 2017 00:00:00 +0000</pubDate>
        <link>https://mikeborozdin.com/post/split-user-stories-get-value-early</link>
        <guid isPermaLink="true">https://mikeborozdin.com/post/split-user-stories-get-value-early</guid>
        
        
      </item>
    
  </channel>
</rss>
